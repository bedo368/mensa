"use strict";(()=>{var e={};e.id=81,e.ids=[81],e.modules={6037:e=>{e.exports=require("mongoose")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1050:(e,t,r)=>{r.r(t),r.d(t,{config:()=>m,default:()=>l,routeModule:()=>c});var n={};r.r(n),r.d(n,{default:()=>a});var o=r(9947),s=r(325),u=r(6762),i=r(4622),d=r(4278);async function a(e,t){let{studentId:r}=e.query;if(await (0,i.A)(),!r)return t.status(400).json({error:"Student ID is required."});if("GET"===e.method)try{let e=await d.A.find({studentId:r}).populate("testId","title").sort({createdAt:-1});t.status(200).json(e)}catch(e){console.error("Error fetching student tests:",e),t.status(500).json({error:"Error fetching student tests."})}else t.setHeader("Allow",["GET"]),t.status(405).json({error:`Method ${e.method} not allowed`})}r(7819);let l=(0,u.M)(n,"default"),m=(0,u.M)(n,"config"),c=new o.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/student-tests/[studentId]",pathname:"/api/student-tests/[studentId]",bundlePath:"",filename:""},userland:n})},4278:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(6037),o=r.n(n);let s=new(o()).Schema({testId:{type:o().Schema.Types.ObjectId,required:!0,ref:"Test"},studentId:{type:o().Schema.Types.ObjectId,required:!0,ref:"User"},answers:{type:Map,of:Number,required:!0},totalScore:{type:Number,default:0},isGraded:{type:Boolean,default:!1},submissionDate:{type:Date,default:Date.now}},{timestamps:!0}),u=o().models.StudentAnswer||o().model("StudentAnswer",s)},7819:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6037),o=r.n(n);let s=new(o()).Schema({question:String,options:[String],correctAnswer:Number,image:String}),u=new(o()).Schema({title:{type:String,required:!0},description:{type:String,required:!0},questions:[s],questionCount:{type:Number,required:!0},difficulty:{type:String,enum:["easy","medium","hard"],required:!0},totalMarks:{type:Number,required:!0},timeLimit:{type:Number,required:!0,default:60},createdAt:{type:Date,default:Date.now}}),i=o().models.Test||o().model("Test",u)},4622:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6037),o=r.n(n);let s="mongodb+srv://user:JUeucc905NPw0B9b@cluster0.qjvmb.mongodb.net/";if(!s)throw Error("يرجى إعداد متغير البيئة MONGODB_URI في ملف .env.local");let u=global.mongoose;u||(u=global.mongoose={conn:null,promise:null});let i=async function(){return u.conn||(u.promise||(u.promise=o().connect(s,{bufferCommands:!1}).then(e=>e)),u.conn=await u.promise),u.conn}},325:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,t,r)=>{e.exports=r(5600)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=1050);module.exports=r})();