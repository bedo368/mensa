(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{2433:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return s(9290)}])},9290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(4848),a=s(6540),c=s(1106),l=s.n(c),n=s(6715),d=s(4040),i=s.n(d);function o(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[d,o]=(0,a.useState)(!1),h=(0,n.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token");if(e)try{let t=i().decode(e);(null==t?void 0:t.type)==="admin"?o(!0):h.push("/")}catch(e){console.error("Error decoding token:",e),h.push("/")}else h.push("/")},[h]),(0,a.useEffect)(()=>{d&&(async()=>{try{let e=await fetch("/api/tests"),s=await e.json();t(s)}catch(e){console.error("Error fetching tests:",e)}finally{c(!1)}})()},[d]);let x=async e=>{if(confirm("هل أنت متأكد أنك تريد حذف هذا الاختبار؟"))try{let s=await fetch("/api/test/".concat(e),{method:"DELETE"}),r=await s.json();s.ok?(t(t=>t.filter(t=>t._id!==e)),alert("تم حذف الاختبار بنجاح")):alert("حدث خطأ أثناء حذف الاختبار: "+r.message)}catch(e){console.error("Error deleting test:",e),alert("حدث خطأ أثناء حذف الاختبار")}},p=e=>{h.push("/top-students/".concat(e))};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-blue-300 py-8 px-4",children:[(0,r.jsx)("nav",{className:"bg-white text-white shadow-md py-4",children:(0,r.jsx)("div",{className:"container mx-auto flex justify-between items-center px-6",children:(0,r.jsx)("h1",{className:"text-2xl font-extrabold text-blue-600",children:(0,r.jsx)(l(),{href:"/",children:"المنصة التعليمية لمنهج الدراسات رابعة ابتدائي"})})})}),(0,r.jsxs)("div",{className:"container mx-auto py-8 px-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"جميع الاختبارات"}),(0,r.jsx)("p",{className:"text-gray-700",children:"هنا يمكنك عرض جميع الاختبارات المضافة وإدارتها بسهولة."})]}),(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)(l(),{href:"/admin/new-test",className:"px-6 py-3 bg-green-500 text-white rounded-lg shadow hover:bg-green-600 transition",children:"إضافة اختبار جديد"})}),s?(0,r.jsx)("p",{className:"text-gray-500 text-center",children:"جارٍ تحميل البيانات..."}):0===e.length?(0,r.jsx)("p",{className:"text-gray-500 text-center",children:"لا توجد اختبارات مضافة حتى الآن."}):(0,r.jsx)("div",{className:"bg-white shadow-md rounded-lg p-4",children:(0,r.jsxs)("table",{className:"w-full table-auto text-black border-separate border-spacing-2",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200 text-black",children:[(0,r.jsx)("th",{className:"py-2 px-4 text-center border",children:"ID"}),(0,r.jsx)("th",{className:"py-2 px-4 text-center border",children:"عنوان الاختبار"}),(0,r.jsx)("th",{className:"py-2 px-4 text-center border",children:"عدد الأسئلة"}),(0,r.jsx)("th",{className:"py-2 px-4 text-center border",children:"الإجراء"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"text-center border-b hover:bg-gray-100 cursor-pointer",onClick:()=>p(e._id),children:[(0,r.jsx)("td",{className:"py-2 border",children:e._id}),(0,r.jsx)("td",{className:"py-2 border",children:e.title}),(0,r.jsx)("td",{className:"py-2 border",children:e.questions.length}),(0,r.jsx)("td",{className:"py-2 border",children:(0,r.jsx)("button",{className:"text-red-500 underline hover:text-red-700",onClick:t=>{t.stopPropagation(),x(e._id)},children:"حذف"})})]},e._id))})]})})]})]})}},6715:(e,t,s)=>{e.exports=s(4009)}},e=>{var t=t=>e(e.s=t);e.O(0,[106,636,593,792],()=>t(2433)),_N_E=e.O()}]);